/*!
 * jQuery smartScroll v1.2.0
 * https://github.com/happytodesign/smartScroll
 *
 * Copyright 2013 happytodesign.com (mailbox@happytodesign.com)
 * Released under the MIT license
 *
 * Date: 2013-06-01
 */!function(e){"use strict";function n(n,r){this.element=n;this.options=e.extend(t,r);this._window=e(window);this._init()}var t={offset:0,activeClass:"active",activeParent:"",filter:"",hash:!1,speed:"relative",maxSpeed:2e3,easing:"swing",activate:function(){},scrollStart:function(){},scrollEnd:function(){}};n.prototype={constructor:n,refresh:function(){this.element.ids=[];this._offsets={};var t=this,n=e(this.element).find('[href^="#"], [data-target^="#"]');this.options.filter&&(n=n.filter(this.options.filter));n.each(function(){var n=this.getAttribute("href")||e(this).data("target"),r=e(n).length&&e(n);if(r){this.setAttribute("data-target",n);t.element.ids.push(n);t._offsets[n]=[r.offset().top-t.options.offset,r.offset().top+r.outerHeight(!0)-t.options.offset]}})},_init:function(){this.refresh();this._monitor();this._smoothScroll();var t=this._window,n=this,r=e.proxy(this.refresh,this);t.on("scroll.smartScroll",e.proxy(this._monitor,this));t.on("mousedown.smartScroll mousewheel.smartScroll keyup.smartScroll",function(){if(n._scrolling){n._scrolling=!1;e("html, body").stop()}});t.on("resize.smartScroll",function(){clearTimeout(this._refreshTimer);this._refreshTimer=setTimeout(function(){r()},25)})},_monitor:function(){if(!this._scrolling){var e,t=this.element.ids,n=this._offsets,r=this._window.scrollTop();for(var i=t.length;i--;){var s=t[i];if(r>=n[s][0]&&r<=n[s][1]){e=s;break}}e?this._activate(e):this._activate()}},_activate:function(t){var n=this.element;if(n.current!==t){n.previous=n.current;var r=n.current=t,i=e(n).find('[data-target="'+r+'"]'),s=this.options.activeParent,o=this.options.activeClass||"active";e(n).find("."+o).removeClass(o);undefined!==r&&(i.closest(s,n).length?i.closest(s,n).addClass(o):i.addClass(o));if(this.options.hash){var u=r;undefined===u&&(u=window.location.pathname);u+=window.location.search;clearTimeout(this._hashTimer);this._hashTimer=setTimeout(function(){history.replaceState({},"",u)},250)}this.options.activate(n)}},_smoothScroll:function(){var t=this;e(t.element).on("click",'[data-target="'+t.element.ids.join('"], [data-target="')+'"]',function(n){n.preventDefault();t._scrolling=!0;t.options.scrollStart();var r=this.getAttribute("data-target"),i="relative"===t.options.speed&&Math.abs(t._offsets[r][0]-t.options.offset-t._window.scrollTop())||t.options.speed;i>t.options.maxSpeed&&(i=t.options.maxSpeed);t._activate(r);e("html, body").stop().animate({scrollTop:t._offsets[r][0]},i,t.options.easing,function(){t._scrolling=!1;t.options.scrollEnd()})})}};e.fn.smartScroll=function(e){return this.each(function(){new n(this,e)})}}(window.jQuery);
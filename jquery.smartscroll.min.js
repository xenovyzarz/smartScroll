/*!
 * jQuery smartScroll v1.1.0
 * https://github.com/happytodesign/smartScroll
 *
 * Copyright 2013 happytodesign.com (mailbox@happytodesign.com)
 * Released under the MIT license
 *
 * Date: 2013-05-15
 */!function(e){"use strict";function n(n,r){this.element=n;this.options=e.extend(t,r);this._window=e(window);this._init()}var t={offset:0,activeClass:"active",parent:"",filter:"",hash:!1,speed:"relative",easing:"swing",activate:function(){},scrollStart:function(){},scrollEnd:function(){}};n.prototype={constructor:n,refresh:function(){this.element.ids=[];this._offsets={};var t=this,n=e(this.element).find('a[href^="#"]');this.options.filter.length&&(n=n.filter(this.options.filter));n.map(function(){var n=this.getAttribute("href"),r=e(n).length&&e(n);return r&&[[n,[r.offset().top-t.options.offset,r.offset().top+r.outerHeight(!0)-t.options.offset]]]||null}).each(function(){t.element.ids.push(this[0]);t._offsets[this[0]]=this[1]})},_init:function(){this.refresh();this._monitor();this._smoothScroll();var t=this._window,n=this,r=e.proxy(this.refresh,this);t.on("scroll.smartScroll",e.proxy(this._monitor,this));t.on("mousedown.smartScroll mousewheel.smartScroll keyup.smartScroll",function(){if(n._scrolling){n._scrolling=!1;e("html, body").stop()}});t.on("resize.smartScroll",function(){clearTimeout(this._refreshTimer);this._refreshTimer=setTimeout(function(){r()},25)})},_monitor:function(){if(!this._scrolling){var e,t=this.element.ids,n=this._offsets,r=this._window.scrollTop();for(var i=t.length;i--;){var s=t[i];if(r>=n[s][0]&&r<=n[s][1]){e=s;break}}e?this._activate(e):this._activate()}},_activate:function(t){if(this.element.current!==t){var n=this.element.previous=this.element.current,r=this.element.current=t,i=this.options.parent||"a",s=this.options.activeClass||"active";undefined!==n&&e(this.element).find('a[href="'+n+'"]').closest(i).removeClass(s);undefined!==r&&e(this.element).find('a[href="'+r+'"]').closest(i).addClass(s);if(this.options.hash){var o=r;undefined===o&&(o=window.location.pathname);o+=window.location.search;clearTimeout(this._hashTimer);this._hashTimer=setTimeout(function(){history.replaceState({},"",o)},250)}this.options.activate(this.element)}},_smoothScroll:function(){var t=this;e(this.element).on("click",'a[href="'+this.element.ids.join('"], a[href="')+'"]',function(n){n.preventDefault();t._scrolling=!0;t.options.scrollStart();var r=this.getAttribute("href"),i="relative"===t.options.speed&&Math.abs(t._offsets[r][0]-t.options.offset-t._window.scrollTop())||t.options.speed;t._activate(r);e("html, body").stop().animate({scrollTop:t._offsets[r][0]},i,t.options.easing,function(){t._scrolling=!1;t.options.scrollEnd()})})}};e.fn.smartScroll=function(e){return this.each(function(){var t=new n(this,e)})}}(window.jQuery);